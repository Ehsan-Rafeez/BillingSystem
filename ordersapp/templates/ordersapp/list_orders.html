{% extends 'core/base.html' %} 
{% block title %}Orders List - School Management System{% endblock %} 

{% block content %}
<div class="container mt-4">
  <h2 class="mb-4">Orders List</h2>

  <table class="table table-striped table-bordered shadow">
    <thead class="table-dark">
      <tr>
        <th>ID</th>
        <th>Order Name</th>
        <th>Customer Name</th>
        <th>Phone</th>
        <th>Delivery Date</th>
        <th>Total Amount</th>
        <th>Received Amount</th>
        <th>Due Amount</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      {% for order in orders %}
      <tr>
        <td>{{ order.id }}</td>
        <td>{{ order.order_name }}</td>
        <td>{{ order.customer_name }}</td>
        <td>{{ order.phone_number }}</td>
        <td>{{ order.delivery_date }}</td>
        <td>{{ order.total_amount }}</td>
        <td>{{ order.received_amount }}</td>
        <td>{{ order.due_amount }}</td>
        <td>
          <a href="{% url 'payment_entry' order.id %}" class="btn btn-success btn-sm mb-1">Add Payment</a>
          <a href="{% url 'edit_order' order.id %}" class="btn btn-warning btn-sm mb-1">Edit</a>
          <form method="post" action="{% url 'delete_order' order.id %}" style="display:inline;">
            {% csrf_token %}
            <button type="submit" class="btn btn-danger btn-sm mb-1" onclick="return confirm('Are you sure you want to delete this order?');">
              Delete
            </button>
          </form>
        </td>
      </tr>
      {% empty %}
      <tr>
        <td colspan="9" class="text-center">No orders found.</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>

  <a href="{% url 'create_orders' %}" class="btn btn-primary mt-3">Create New Order</a>
</div>
{% endblock %}
